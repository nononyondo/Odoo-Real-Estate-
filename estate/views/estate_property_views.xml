<?xml version="1.0"?>

<odoo>

    <!--  start of Static files  -->
    
    <data>
        <template id="assets_backend" name="estate assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/estate/static/style.css"/>
                <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous"/> -->
                <!-- <script src="estate/static/fontawesome/js/all.min.js"></script> -->
                
            </xpath>
        </template>
    
    <!--end of Static files section -->
    
    
    
    <!-- start of action section -->
        
        <record id="estate_property_action" model="ir.actions.act_window">
            <field name="name">Properties</field>
            <field name="res_model">estate.property</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_inactive":1}</field>
        </record>
        
        <record id="estate_property_type_action" model="ir.actions.act_window">
            <field name="name">Property Types</field>
            <field name="res_model">estate.property.type</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="estate_property_tag_action" model="ir.actions.act_window">
            <field name="name">Property Tags</field>
            <field name="res_model">estate.property.tag</field>
            <field name="view_mode">tree,form</field>
        </record>
        
              
        
       
           
     <!-- end of actions section -->
     
     
     
     
    <!-- start of views section -->
    
    	<record id="estate_property_offer_view_tree" model="ir.ui.view">
    	    <field name="name">Offers</field>
    	    <field name="model">estate.property.offer</field>
    	    <field name="arch" type="xml">
    	        <tree string="Offer" decoration-danger="status=='Refused'" decoration-success="status=='Accepted'" editable="1">
    	            <field name="price"/>
    	            <field name="partner_id"/>
    	            <field name="validity"/>
    	            <field name="date_deadline"/>
                    <button name="action_accept" string="Accept" state="Accept" attrs="{'invisible':[('status', '=', 'Accepted')]}" type="object" icon="fa-check"/>
                    <button name="action_refuse" string="Refuse" state="Refuse" attrs="{'invisible':[('status', '=', 'Accepted')]}" type="object" icon="fa-times"/>
    	            <field name="status"/>
    	        </tree>
    	    </field>
    	</record>
    	
    	<record id="estate_property_offer_view_form" model="ir.ui.view">
    	    <field name="name">Offers</field>
    	    <field name="model">estate.property.offer</field>
    	    <field name="arch" type="xml">
    	        <form string="Offer">
    	            <group>
                        
                            <field name="price"/>
                            <field name="partner_id"/>
                            <field name="validity"/>
                            <field name="date_deadline"/>
                            <field name="status"/>
                        
    	            </group>
    	        </form>
    	    </field>
    	</record>
    	
        
        <record id="estate_property_tag_view_tree" model="ir.ui.view">
            <field name="name">Property Tags</field>
            <field name="model">estate.property.tag</field>
            <field name="arch" type="xml">
                <tree string="Property Tags" editable="1">
                  <field name="name"/>
                </tree>
            </field>
        </record>
        
        
        
        <record id="estate_property_tag_view_search" model="ir.ui.view">
            <field name="model">estate.property.tag</field>
            <field name="arch" type="xml">
                <search string="Property Tags">
                    <field name="name"/>
                </search>
            </field>
        </record>
        
        <record id="estate_property_type_view_form" model="ir.ui.view">
            <field name="model">estate.property.type</field>
            <field name="arch" type="xml">
                <form string="Property Type">
                    <sheet>
                        <div class="oe_title">
                            <h1><field name="property_type" style="text-decoration:underline;"/></h1>
                        </div>
                        <notebook>
                            <page string="Properties">
                                
                                    <field name="property_ids" context="{'default':active_id}">
                                        <tree>
                                            <field name="name"/>
                                            <field name="expected_price"/>
                                            <field name="state"/>
                                        </tree>
                                    </field>
                                
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>          
        
        
        
        <record id="estate_property_Type_view_tree" model="ir.ui.view">
            <field name="model">estate.property.type</field>
            <field name="arch" type="xml">
                    <tree string="Property Types" >
                        <field name="sequence" widget="handle"/>
                        <field name="property_type"/>
                    </tree>
            </field>
        </record>


        <record id="estate_property_view_tree" model="ir.ui.view">
            <field name="model">estate.property</field>
            <field name="arch" type="xml">
                    <tree string="Real Estate" decoration-success="state=='Offer Received'" decoration-bf="state=='Offer Accepted'" decoration-muted="state=='Sold'" default_order="date_availability desc">
                        <field name="name"/>
                        <field name="tags_ids" widget="many2many_tags" options="{'color_field':'color'}"/>
                        <field name="property_type_ids"/>
                        <field name="postcode"/>
                        <field name="bedrooms"/>
                        <field name="living_area"/>
                        <field name="expected_price"/>
                        <field name="selling_price"/>
                        <field name="date_availability" optional="hide"/>
                        <field name="garden"/>
                        <field name="garden_area"/>
                        <field name="garden_orientation"/>
                        <field name="state"/>
                                            
                    </tree>
            </field>
        </record>
        
        <record id="estate_property_view_form" model="ir.ui.view">
            <field name="model">estate.property</field>
            <field name="arch" type="xml">
                <form string="properties">
                    <header>
                        <button style="background-color:aqua;" name="action_sold" attrs="{'invisible':[('state', '=', 'Sold')]}" type="object"  string="Sold"/>
                        <button style="background-color:orange;" name="action_cancel" attrs="{'invisible':[('state', '=', 'Sold')]}" type="object" string="Cancel"/>
                        <field name="state" widget="statusbar" clickable="1"></field>
                    </header>
                    
                    <sheet>
                        <h1><field name="name"/></h1>
                        <field class="tags" name="tags_ids" widget="many2many_tags" options="{'color_field':'color', 'no_edit_color': False}"/>
                        <group>
                            <!-- <h6>Status<field name="state" class="status"/></h6> -->
                            <h6>Property Type<field name="property_type_ids" options="{'no_create':True, 'no_create_edit':True}" class="postcode"/></h6>
                            <h6>Postcode<field name="postcode" class="postcode"/></h6>
                            <h6>Expected Price<field name="expected_price" class="expt"/></h6>
                            <!-- <h6>Best Offer<field name="best_price"/></h6> -->
                        </group>                  
                        
                        
                        <group>
                            <h6>Available From<field name="date_availability" class="date_avlty"/></h6>
                            <h6>Selling Price<field name="selling_price" class="sel"/></h6>
                        </group>
                        
                        <notebook>
                            <page string="Description">
                                <group>
                                    <field name="description" class="Dpt"/>
         			 </group>
         			 <group>
                                    <field name="bedrooms" />
                                    <field name="living_area" />
                                    <field name="facades" />
                                    <field name="garage" />
                                    <field name="garden"/>
                                    <field name="garden_area" attrs="{'invisible':[('garden','=', False)]}" />
                                    <field name="garden_orientation" attrs="{'invisible':[('garden','=', False)]}" />
                                    <field name="total_area"/>
                                    
         			 </group>
         			 
         		    </page>
         		    
         		    <page string="Offers">
         		      <field name="offer_ids" attrs="{'readonly':[('state','=','Offer Accepted','Sold','Canceled')]}"/>
         		    </page>
         		    
                           <page string="Other Info">
                                <group>
                                    <field name="salesperson" class="seller"/>
                                    <field name="buyer" class="buyer"/>
                                </group>
                            </page>
                            
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        <record id="estate_property_view_search" model="ir.ui.view">
            <field name="model">estate.property</field>
            <field name="arch" type="xml">
                <search string="properties">
                                        
                    <field name="name" context="{'search_default_name':1}"/>
                    <field name="postcode"/>
                    <field name="expected_price"/>
                    <field name="bedrooms"/>
                    <field name="living_area" string="living area"/>
                    <field name="facades"/>
                    <field name="property_type_ids"/>
                    <separator/>
                    <filter string="Available" name="inactive"  domain="[('active', '=', False),]" context="{'search_default_inative':1}"/>
                    
                    <filter string="New" name="new" domain="[('active','=','False'),('state', '=', 'New')]"/>
                    <filter string="Offer Received" name="offer_received" domain="[('active','=',False),('state', '=', 'Offer Received')]"/>
                    
                    
                    <group expand="1">
                        <filter name="Postcode" context="{'group_by':'postcode','residual':True}"/>
                    </group>
                </search>
            </field>
            
        </record>
        
        
    </data>        
 
 <!-- end of views section -->
    
</odoo>
